Xray-REALITY 基於旁側的方式識別

識別原理是基於這個[https://github.com/XTLS/REALITY](https://github.com/XTLS/REALITY)

它匹配的是asn進行碰撞

需要jdk21+才能運作

我截取了5分鐘的上網資料，誤報率大約是4.7%，對同樣的資料再次運行判定誤報率為5.9%，第3次對同樣的資料進行判定誤報率為6.5%，第4次和第5次是5%左右

這種東西肯定沒法部署，如果是對重要網站執行白名單，應該是可以降低誤報率

更新1

我第2天再對昨天同一份舊資料用同一個dns供應商進行測試是10.7%誤報率，然後更換dns并且刷新dns快取后是9.5%誤報率，更換dns供應商沒發現會導致誤報率大幅波動，倒是時間過久了會導致誤報率上漲

可能是服務ip換了，而且昨天和今天剛好是月底31日和月初1日

誤報的網域大多數都是cdn或者api

更新2

~~結果我自己先引了~~ 啊，一不小心就。。。一不小心就。。。
RPRX的要求[https://github.com/XTLS/Xray-core/issues/2230#issuecomment-1598256976](https://github.com/XTLS/Xray-core/issues/2230#issuecomment-1598256976)

我的測試是不完善，并且當時的測試環境沒有dns污染，你們有興趣自己去測試，也許比我高或者比我低

有沒有想説什麽重要的事情？重要的事情就是精心挑選dst

我也沒有打算誤導新手，我倒是覺得這個東西可以讓他們知道不要拿AWS複製微軟或者拿Azure複製亞馬遜或者拿甲骨文複製蘋果

更新3（2023-8）

我似乎搞錯了一個問題，我這個專案是以平民視角進行旁路檢測代理，但是我忘記了GFW是擁有上帝視角的，它擁有鏡像root dns，isp也擁有自己的dns，也就是說它可能已經擁有接近完整的dns-ip list，它已經擁有dns-ip白名單了，能通過網域名稱拉取到正確的ip list，所以基於dns-ip判斷代理站是可以實現的，誤報率可以降至接近0，并且可以接近100%精準的識別非正常dns解析的代理網站，以及sni欺詐，實現原理是GFW基於自身的dns拉取正確的ip list，在通過另一個上帝視角，也就是OSI 1~4層拉取資訊，然後進行對比。如果ip發生變動了怎麽辦？如果ip發生變動，那麽就以最新的dns-ip爲準，不正常dns解析的網站封掉不會有太大影響，因爲當前dns-ip解析的網站可以正常訪問，銀行也可以正常工作

至於解決方法，我還是比較看好複製自己網站的方式。如果網站還有幾千人也許訪問會更好？(玄學？)

但是内層的時序和頻率還是難以掩蓋，只要使用它就會產生這種結果


使用方式
```
1.你需要用wireshark獲取資料
2.在wireshark設定過濾，tls.handshake.type==1&&!(udp.port==443)
上面的意思是只獲取client hello，并且過濾掉quic
3.然後在wireshark把資料導出成json，並改名成data.json
4.截取5分鐘以上的資料
5.mvn package
6.然後把編譯出來的jar和data.json放在同一個資料夾内
7.java -jar ./gfw.jar

如果顯示ip x.x.x.x xray-REALITY 那麽就代表你可能用了xray-REALITY
```

防止被這種旁側識別的解決方案就是

2.複製自己的網站(100%無法通過這種旁側方法識別，因爲就是自己的)
